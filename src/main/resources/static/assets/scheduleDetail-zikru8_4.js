import{a as I,r as l,j as e,c as P,g as $,u as B,e as A,L as E,b as C}from"./index-vPyaWLeP.js";import{T as O,R as M}from"./TitleHeader-DmOIGpGi.js";import{B as G}from"./index-Bq2mCWz2.js";import{G as z}from"./index-C5zZlqw2.js";import{S as F}from"./ScheduleDay-CjzNwnUc.js";import{f as H}from"./index-DFSdNWGh.js";import{S as V,a as _}from"./swiper-react-ufqZANpM.js";import{L as q,T as J}from"./pic-Bp3CpqNF.js";import{B as D}from"./button-DbuczX__.js";import"./match-C6wYgUSM.js";import"./MarkerClusterer-ocTskxQJ.js";import"./tripAtom-Cona1Fda.js";import"./index-D6yxsJgh.js";import"./context-UlFNglpC.js";import"./useSize-40MQQq3L.js";import"./BaseInput-CdGcV17f.js";import"./useMergedState-BlXbDCcH.js";import"./ContextIsolator-CJOux_3c.js";import"./index-CZJbkbXl.js";import"./index-BknOe4VR.js";import"./index-4zV-iNF3.js";import"./index-_WMGC53t.js";import"./Portal-BctSke4q.js";import"./useId-CRRn3EMz.js";import"./zoom-6OtM0EU7.js";const K=({openSelectTripModal:x,setOpenSelectTripModal:d,tripLocationList:m})=>{const h=I(),f=()=>{h("/schedule/days",{state:{selectedLocationId:m,tripId:c.tripId}})},[s,u]=l.useState([]),[r,g]=l.useState(null),[c,n]=l.useState(null);l.useEffect(()=>{console.log("tripListData",s)},[s]);const j=async()=>{try{const t=await P.get("/api/trip-list");console.log(t.data);const p=t.data.data.beforeTripList;u(p)}catch(t){console.log("여행 목록 불러오기:",t)}},w=(t,o)=>{g(o),console.log("item",t),n(t)},v=()=>{d(!1)},N=t=>{t.stopPropagation()};return l.useEffect(()=>{j()},[]),e.jsx("div",{className:`fixed top-0 left-[50%] translate-x-[-50%] z-10\r
\r
            max-w-3xl w-full mx-auto h-screen\r
            flex items-end justify-center\r
            bg-[rgba(0,0,0,0.5)]\r
            `,onClick:()=>{v()},children:e.jsxs("div",{className:`bg-white w-full \r
                rounded-t-2xl px-[60px] py-[55px]\r
                flex flex-col gap-[20px]\r
                `,onClick:N,children:[e.jsx("h2",{className:"text-[28px] text-slate-700 font-bold",children:"이 일정을 담을 여행을 선택해주세요."}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h3",{className:"text-[18px] text-slate-700 font-semibold",children:"나의 다가오는 여행"}),e.jsx("ul",{className:`flex flex-col px-[10px] py-[20px] gap-[30px]\r
          max-h-[55vh] overflow-y-auto`,children:s==null?void 0:s.map((t,o)=>e.jsxs("li",{className:`flex items-center gap-[20px] px-[20px] py-[10px] rounded-[16px] ${r===o?"bg-slate-200":""}`,onClick:()=>w(t,o),children:[e.jsx("div",{className:"w-[50px] h-[50px] bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${q}${t.locationPic}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h4",{className:"text-[18px] text-slate-700 font-semibold",children:t.title}),e.jsxs("p",{className:"text-[16px] text-slate-500",children:[e.jsx("span",{children:t.startAt}),e.jsx("span",{children:"-"}),e.jsx("span",{children:t.endAt})]})]})]},o))})]}),e.jsx(D,{type:"primary",htmlType:"button",className:"h-[50px] px-[15px] py-[20px] text-[24px] text-white font-semibold",onClick:f,children:"선택 완료"})]})})},we=()=>{var p,T,b,S,y,L,R,k;$("accessToken");const[x]=B(),d=x.get("tripId"),m=x.get("TripReviewId"),h=I(),f=()=>{h(-1)},[s,u]=l.useState({}),[r,g]=l.useState({}),[c,n]=l.useState(!1),[j,w]=l.useState(!1),[v,N]=l.useState(!1),t=async()=>{try{const i=(await C.get(`/api/trip-review/otherTripReview?tripReviewId=${m}`)).data;u(i.data),i&&N(!0)}catch(a){console.log("다른 사람 여행기 조회",a)}},o=async()=>{try{const a=await C.get(`/api/trip?trip_id=${d}&signed=false`);console.log("여행확인하기",a.data);const i=a.data.data;g(i),i&&w(!0)}catch(a){console.log(a)}};return l.useEffect(()=>{t(),o()},[]),e.jsx("div",{children:j&&v?e.jsxs(e.Fragment,{children:[e.jsx(O,{icon:"back",onClick:f,rightContent:e.jsx(M,{})}),e.jsxs("div",{className:"flex flex-col px-[32px] py-[30px] gap-[30px]",children:[e.jsx(V,{slidesPerView:1,spaceBetween:0,loop:!0,className:"mySwiper w-full h-[406px] px-[32px] overflow-hidden",children:s.length>0?(T=(p=s[0])==null?void 0:p.tripReviewPics)==null?void 0:T.map((a,i)=>e.jsx(_,{className:"max-w-3xl h-[406px] bg-slate-200",children:e.jsx("img",{src:`${J}${s[0].tripReviewId}/${a}`,alt:"thum",className:"w-full h-full object-cover"})},i)):null}),e.jsx("div",{className:"flex flex-col gap-[10px]",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-[36px] text-slate-700",children:(b=s[0])==null?void 0:b.title}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(G,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(S=s[0])==null?void 0:S.recentCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(z,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(y=s[0])==null?void 0:y.likeCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(A,{className:"text-slate-300 text-[18px]"}),e.jsxs("p",{className:"text-slate-500 font-bold text-[14px]",children:[" ",(L=s[0])==null?void 0:L.scrapCount]})]})]})]})}),e.jsx("div",{children:e.jsx("p",{children:(R=s[0])==null?void 0:R.content})})]}),e.jsx("div",{children:e.jsx("div",{className:"flex flex-col gap-[50px]",children:(k=r==null?void 0:r.days)==null?void 0:k.map((a,i)=>e.jsx(F,{data:a,newTrip:!1,readOnly:!0},i))})}),e.jsx("div",{className:"px-[32px] mb-[30px]",children:e.jsxs(D,{variant:"filled",className:"flex gap-[10px] py-[10px] h-auto w-full",onClick:()=>n(!0),classNames:"bg-slate-100",disabled:!0,children:[e.jsx(H,{className:"w-[30px] h-[30px] text-slate-400"}),e.jsx("span",{className:"font-semibold text-[24px] text-slate-400",children:"업데이트 예정인 메뉴입니다"})]})}),c&&e.jsx(K,{openSelectTripModal:c,setOpenSelectTripModal:n,tripLocationList:r==null?void 0:r.tripLocationList})]}):e.jsx(E,{})})};export{we as default};
