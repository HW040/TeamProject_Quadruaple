import{g as F,R as C,h as E,r as m,a as k,d as A,u as B,j as e,b as P}from"./index-vPyaWLeP.js";import{R as S}from"./api-B-eoqegl.js";import{T as U}from"./TitleHeader-DmOIGpGi.js";import{A as $}from"./index-DFSdNWGh.js";import{F as t}from"./index-iSG9fmiU.js";import{I as c}from"./index-D6yxsJgh.js";import{R as z}from"./index-BknOe4VR.js";import{U as D}from"./index-ChR2nCXK.js";import{B as O}from"./button-DbuczX__.js";import"./index-Bq2mCWz2.js";import"./context-UlFNglpC.js";import"./useSize-40MQQq3L.js";import"./Portal-BctSke4q.js";import"./collapse-BbEVqHco.js";import"./zoom-6OtM0EU7.js";import"./index-CvYxd2Io.js";import"./index-4zV-iNF3.js";import"./index-_WMGC53t.js";import"./index-CZJbkbXl.js";import"./useId-CRRn3EMz.js";import"./useMergedState-BlXbDCcH.js";import"./ContextIsolator-CJOux_3c.js";import"./useLocale-h8ylhYfp.js";import"./BaseInput-CdGcV17f.js";import"./fade-BIoLSxDa.js";import"./CheckOutlined-Ap5ijRa8.js";const he=()=>{const f=F("accessToken"),[a,V]=C(E);m.useEffect(()=>{},[a]);const h=k(),p=()=>{h(`/contents/index?strfId=${n}`)},o=A().state,[u]=t.useForm(),[g,d]=m.useState([]),[I,j]=m.useState(!1),[b]=B(),n=b.get("strfId"),v=({fileList:l})=>d(l),y=async l=>{const{content:N,file:r,rating:w,strfId:L,userId:R}=l,T={userId:parseInt(R),strfId:parseInt(L),rating:parseInt(w),content:N},i=new FormData;d(r.fileList),i.append("p",new Blob([JSON.stringify(T)],{type:"application/json"})),r&&r.fileList&&r.fileList.length>0&&r.fileList.forEach(s=>{i.append("pics",s.originFileObj)});const x=i.get("p");x&&x.text().then(s=>console.log("p의 내용:",s));try{(await P.post(`${S.postReview}`,i,{headers:{Authorization:`Bearer ${f}`}})).data&&p()}catch(s){console.error(s)}};return e.jsxs("div",{children:[e.jsx(U,{icon:"back",onClick:p,title:o==null?void 0:o.strfTitle}),e.jsx("div",{className:"px-[32px] mt-[60px]",children:e.jsxs(t,{form:u,onFinish:y,layout:"vertical",initialValues:{userId:a.userId,strfId:n},className:"mt-[50px]",children:[e.jsx(t.Item,{label:"userId",name:"userId",hidden:!0,children:e.jsx(c,{value:a.userId})}),e.jsx(t.Item,{label:"strfId",name:"strfId",hidden:!0,children:e.jsx(c,{value:n})}),e.jsx(t.Item,{name:"rating",className:"flex flex-col justify-center items-center gap-[10px] text-slate-300",help:e.jsx("div",{className:"text-center mt-[10px] text-slate-300",children:"별점을 입력해주세요."}),children:e.jsx(z,{style:{fontSize:54}})}),e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"리뷰를 남겨주세요."}),e.jsx(t.Item,{name:"content",rules:[{required:!0,message:"리뷰를 입력해주세요."}],children:e.jsx(c.TextArea,{rows:4,placeholder:"직접 경험한 솔직한 리뷰를 남겨주세요.",variant:"borderless",maxLength:100,style:{height:300,resize:"none"},onChange:()=>j(!0),className:`placeholder: text-[20px] placeholder: text-slate-400
                ${I?"bg-white":"bg-slate-50"}`})}),e.jsx(t.Item,{name:"file",label:e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"사진 첨부하기"}),children:e.jsx(D,{id:"file",listType:"picture",beforeUpload:()=>!1,fileList:g,onChange:v,multiple:!0,children:e.jsx("div",{className:`w-[136px] h-[136px] flex items-center justify-center\r
               bg-slate-100 hover:bg-[rgb(237,242,248)] rounded-lg\r
               transition`,children:e.jsx($,{className:"text-[36px] text-slate-400"})})})}),e.jsx(t.Item,{children:e.jsx(O,{type:"primary",htmlType:"submit",className:`w-full h-[80px] py-[10px] rounded-lg\r
              text-[24px] font-semibold`,children:"완료"})})]})})]})};export{he as default};
